package com.jtech.config;

monitor DBManager {
	DBConfig config;
	DBLoader cacheLoader;
	
	action onload {
		on DBConfig():config load(onLoaded);
	}

	action load(action<> onDone) {
		log "Starting loading for connection with parameters; ";
		log "  databaseURL: " + config.databaseURL at INFO;
		log "  user: " + config.user at INFO;
		log "  password: " + config.password at INFO;
		cacheLoader.init(config, onDone);
	}
	
	action onLoaded() {
		route DBLoaded();
	}
}